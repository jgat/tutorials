<!DOCTYPE html>
<!-- saved from url=(0059)http://theintelligentbook.com/page/5087ec85e4b0799fc97e6486 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>page 5087ec85e4b0799fc97e6486</title>
    <link rel="stylesheet" media="screen, print" href="http://theintelligentbook.com/assets/lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" media="screen, print" href="http://theintelligentbook.com/assets/lib/fontawesome/css/font-awesome.css">
    <link rel="stylesheet" media="screen, print" href="http://theintelligentbook.com/assets/stylesheets/ib.css">
    <link rel="stylesheet" media="screen, print" href="http://theintelligentbook.com/assets/stylesheets/front.css">

    <link rel="shortcut icon" type="image/png" href="http://theintelligentbook.com/assets/images/favicon.png">
    <script src="./week11_files/jquery-1.7.2.js" type="text/javascript"></script>

    <script src="./week11_files/bootstrap-modal.js" type="text/javascript"></script>
    <script src="./week11_files/bootstrap-dropdown.js" type="text/javascript"></script>

    

    <link rel="stylesheet" media="screen, print" href="http://theintelligentbook.com/assets/lib/fontawesome/css/font-awesome.css">
    <link rel="stylesheet" media="screen, print" href="http://theintelligentbook.com/assets/stylesheets/viewWikiPage.css">
    <link rel="stylesheet" media="screen" href="http://theintelligentbook.com/assets/stylesheets/slideThemes1.css">
    <link rel="stylesheet" media="print" href="http://theintelligentbook.com/assets/stylesheets/slideThemes1Print.css">
    <link href="./week11_files/css" rel="stylesheet" type="text/css">
    <script src="./week11_files/wikiSubstitutions.js"></script>


    <link href="./week11_files/prettify.css" type="text/css" rel="stylesheet"></head><body><div class="wikiContent" id="article_text">
        
        
        
        <h1>Tutorial Week 11 Sample Solutions</h1><div><br></div><div><br></div><h2>Checkmate</h2><div><br></div><div><ul style="background-color: rgb(249,249,249);"><li>Read and run the tests in the&nbsp;<code>TestCheckmate</code>&nbsp;class. See that they pass -- and that Number Six yet again has not managed to escape.</li></ul><p style="background-color: rgb(249,249,249);"></p><p style="background-color: rgb(249,249,249);"></p><ul style="background-color: rgb(249,249,249);"></ul></div><div><ul style="background-color: rgb(249,249,249);"><li>Draw a UML Sequence Diagram of the&nbsp;<code>TestCheckmate.testCheckmate</code>&nbsp;method -- include as much information as you can. Your diagram should show the story of why Number Six's plan this week fails.</li></ul></div><div><img src="./week11_files/508f4da2e4b0799fc97e6fe8" width="480"><br></div><div><a href="./week11_files/508f4da2e4b0799fc97e6fe8">Full size image</a><br></div><div><br></div><div><ul style="background-color: rgb(249,249,249);"><li>Draw a UML Sequence Diagram of the&nbsp;<code>Person.escapeWithMe(Person p)</code>&nbsp;method -- include as much information as you can. Note that this time, you don't know which path the branches will take.<br></li></ul><p style="background-color: rgb(249,249,249);"></p><p style="background-color: rgb(249,249,249);"></p><ul style="background-color: rgb(249,249,249);"></ul></div><div><br></div><div><img src="./week11_files/508f4ef0e4b0799fc97e6ff4" width="480"><br></div><div><a href="./week11_files/508f4ef0e4b0799fc97e6ff4">Full size image</a><br></div>

<div><br></div><div><ul style="background-color: rgb(249,249,249);"><li>Draw a UML Sequence Diagram of the&nbsp;<code>Warden.mistreat(Person p, List&lt;? extends Person&gt; bystanders)</code>&nbsp;method -- include as much information as you can. Note that this time, you will need to show the loop.</li></ul><div><br></div><div><img src="./week11_files/508f4f0de4b0799fc97e6ff8" width="480"><br></div><div><a href="./week11_files/508f4f0de4b0799fc97e6ff8">Full size image</a><br></div>

<div><br></div><p style="background-color: rgb(249,249,249);"></p><p style="background-color: rgb(249,249,249);"></p><p style="background-color: rgb(249,249,249);"></p></div><h2>Code Coverage</h2><div><ul style="background-color: rgb(249,249,249);"><li>Read the code of the&nbsp;<code>Village.couldConspire(asked, asking)</code>&nbsp;method. Also have a look at the tests in the&nbsp;<code>TestVillage</code>&nbsp;class.</li></ul><div><br></div></div><div><div><pre class="linenums prettyprint"><ol class="linenums"><li class="L0"><span class="kwd">public</span><span class="pln"> </span><span class="typ">Response</span><span class="pln"> couldConspire</span><span class="pun">(</span><span class="typ">Person</span><span class="pln"> asked</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> asking</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L1"><span class="pln">    </span><span class="typ">Response</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></li><li class="L2"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">asked</span><span class="pun">.</span><span class="pln">trusts</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L3"><span class="pln">        result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Escape</span><span class="pun">();</span></li><li class="L4"><span class="pln">    </span><span class="pun">}</span></li><li class="L5"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">asked</span><span class="pun">.</span><span class="pln">thinksIsWarden</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></li><li class="L6"><span class="pln">        result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StagedEscape</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">);</span></li><li class="L7"><span class="pln">    </span><span class="pun">}</span></li><li class="L8"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></li><li class="L9"><span class="pln">        result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">KeepQuiet</span><span class="pun">();</span></li><li class="L0"><span class="pln">    </span><span class="pun">}</span></li><li class="L1"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></li><li class="L2"><span class="pun">}</span></li></ol></pre></div></div><div><br></div><div><code>testCase1</code>&nbsp;will test for when&nbsp;<code>asked.trusts(asking)</code>&nbsp;returns&nbsp;<code>true</code>&nbsp;and&nbsp;<code>asked.thinksIsWarden(asking)</code>&nbsp;returns&nbsp;<code>false</code>.</div><div><code>testCase2</code>&nbsp;will test for when&nbsp;<code>asked.trusts(asking)</code>&nbsp;returns&nbsp;<code>false</code>&nbsp;and&nbsp;<code>asked.thinksIsWarden(asking)</code>&nbsp;returns&nbsp;<code>true</code>.</div><div><br></div><div><ul style="background-color: rgb(249,249,249);"><li>Which statements are not covered by the tests? Write additional test cases (like&nbsp;<code>TestVillage.testCase1</code>&nbsp;and&nbsp;<code>TestVillage.testCase2</code>) to cover those statements.</li></ul><div><br></div><div><div><code>testCase1</code>&nbsp;will enter into the if statement beginning on line 3, but not into either of the statements beginning on lines 6 and 9.</div></div><div><div><code>testCase2</code>&nbsp;will enter into the if statement beginning on line 6, but not into either of the statements beginning on lines 3 and 9.</div></div><div><br></div><div>So, line 10 is not covered, since that if statement is never entered in the tests.&nbsp;<code>testCase3</code>&nbsp;below will cover that statement, by testing the method for&nbsp;when&nbsp;<code>asked.trusts(asking)</code>&nbsp;and&nbsp;<code>asked.thinksIsWarden(asking)</code>&nbsp;both return&nbsp;<code>false</code>.</div><div><br></div><div><pre class="linenums prettyprint"><ol class="linenums"><li class="L0"><span class="lit">@Test</span></li><li class="L1"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> testCase3</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">    </span><span class="typ">Mockito</span><span class="pun">.</span><span class="kwd">when</span><span class="pun">(</span><span class="pln">asked</span><span class="pun">.</span><span class="pln">trusts</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">)).</span><span class="pln">thenReturn</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="typ">Mockito</span><span class="pun">.</span><span class="kwd">when</span><span class="pun">(</span><span class="pln">asked</span><span class="pun">.</span><span class="pln">thinksIsWarden</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">)).</span><span class="pln">thenReturn</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span></li><li class="L4"><span class="pln">    assertSame</span><span class="pun">(</span><span class="typ">KeepQuiet</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Village</span><span class="pun">.</span><span class="pln">INSTANCE</span><span class="pun">.</span><span class="pln">couldConspire</span><span class="pun">(</span><span class="pln">asked</span><span class="pun">,</span><span class="pln"> asking</span><span class="pun">).</span><span class="pln">getClass</span><span class="pun">());</span></li><li class="L5"><span class="pun">}</span></li></ol></pre></div><div><br></div><p style="background-color: rgb(249,249,249);"></p><p style="background-color: rgb(249,249,249);"></p><ul style="background-color: rgb(249,249,249);"><li>Which branches&nbsp;are not covered by the tests? Write additional test cases to cover those statements.</li></ul><div><br></div><div>For the if statement on line 3, the&nbsp;<code>true</code>&nbsp;case is covered by&nbsp;<code>testCase1</code>, and the&nbsp;<code>false</code>&nbsp;case by&nbsp;<code>testCase2</code>.</div><div>For the if statement on line 6, the&nbsp;<code>true</code>&nbsp;case is covered by&nbsp;<code>testCase2</code>, and the&nbsp;<code>false</code>&nbsp;case by&nbsp;<code>testCase1</code>.</div><div>For the if statement on line 9, the&nbsp;<code>true</code>&nbsp;case is covered by&nbsp;<code>testCase3</code>, and the&nbsp;<code>false</code>&nbsp;case by both&nbsp;<code>testCase1</code>&nbsp;and&nbsp;<code>testCase2</code>.<br></div><div><br></div><div>So, all the branches are covered by these three tests.</div><div><br></div><p style="background-color: rgb(249,249,249);"></p><p style="background-color: rgb(249,249,249);"></p><ul style="background-color: rgb(249,249,249);"><li>Which execution paths&nbsp;are not covered by the tests? Write additional test cases to cover those statements.</li></ul><p style="background-color: rgb(249,249,249);"></p></div><div><br></div><div>The execution path can vary on lines 3, 6, and 9, depending on whether the conditions are true or false. The following execution paths are possible:</div><div><ul><li>true on line 3, true on line 6, false on line 9. This is not being covered.</li><li>true on line 3, false on line 6, false on line 9. This is covered&nbsp;by&nbsp;<code>testCase1</code>.</li><li>false on line 3, true on line 6, false on line 9.&nbsp;This is covered&nbsp;by&nbsp;<code>testCase2</code>.</li><li>false on line 3, false on line 6, true on line 9.&nbsp;This is covered&nbsp;by&nbsp;<code>testCase3</code>.</li></ul></div><div>Note that the result of the condition on line 9 is determined by the results of lines 3 and 6, not by the inputs.&nbsp;<code>testCase4</code>&nbsp;below will cover the "true, true, false" path.</div><div><br></div><div><div><pre class="linenums prettyprint"><ol class="linenums"><li class="L0"><span class="lit">@Test</span></li><li class="L1"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> testCase4</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></li><li class="L2"><span class="pln">    </span><span class="typ">Mockito</span><span class="pun">.</span><span class="kwd">when</span><span class="pun">(</span><span class="pln">asked</span><span class="pun">.</span><span class="pln">trusts</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">)).</span><span class="pln">thenReturn</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L3"><span class="pln">    </span><span class="typ">Mockito</span><span class="pun">.</span><span class="kwd">when</span><span class="pun">(</span><span class="pln">asked</span><span class="pun">.</span><span class="pln">thinksIsWarden</span><span class="pun">(</span><span class="pln">asking</span><span class="pun">)).</span><span class="pln">thenReturn</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">);</span></li><li class="L4"><span class="pln">    assertSame</span><span class="pun">(</span><span class="typ">StagedEscape</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Village</span><span class="pun">.</span><span class="pln">INSTANCE</span><span class="pun">.</span><span class="pln">couldConspire</span><span class="pun">(</span><span class="pln">asked</span><span class="pun">,</span><span class="pln"> asking</span><span class="pun">).</span><span class="pln">getClass</span><span class="pun">());</span></li><li class="L5"><span class="pun">}</span></li></ol></pre></div></div><div>Remark: To demonstrate why path coverage is important (at least to some extent), note that if we rewrite the&nbsp;<code>couldConspire</code>&nbsp;method to swap&nbsp;the order of lines 3-5 and 6-8, then&nbsp;test cases 1, 2, and 3 will still pass, and those three will still provide full statement and branch coverage, but test case 4 fails.</div>
    
    
    
    </div>

    <script>
    	var pageResizer = function() {
    		var h = $(window).height()
    		$(".page").css("min-height", 
    		    function (index, value) {
    				return "" + h - ($(this).outerHeight(true) - $(this).height()) + "px"
    			}
    		)
    	}
    	$(window).resize(pageResizer)
    	pageResizer()
    </script>



    

</body><style type="text/css"></style></html>